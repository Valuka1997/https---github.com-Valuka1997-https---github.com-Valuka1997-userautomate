Users and Groups
Note

All labs rely on previous courseware and lab information.

Scenario
New week, same deal. Mr. X has come to you this week with a new set of requirements with a little bit more difficulty but with the same Friday paid vacation. He may get into some trouble giving all these paid vacation days. Who cares? The beach was amazing. In continuation of the Linux setup, Mr. X needs to set up some basic user information for the company. He has a list of each section as well as who needs to be admins.

Objectives
In this lab, you will:

Create new users with a default password
Create groups and assign the appropriate users
Create a user login log file specifically for the company to share
Estimated Completion Time
45 minutes

Starting the Vocareum environment
The lab will start up automatically. When it is ready, the lab status indicator will be green.

Exercise 1: Create Users
Back to the grind, your first task of the week is to create new users based on the user sheet that Mr. X provided. Ensure you spell the userid correctly so they can use default credentials to log in.

Helpful Hint

You may have to use sudo to complete this exercise if you are not root.

TODO
Create users in the CentOS from the list shown in the figure.

First Name	Last Name	userid	Job Role	Starting password
Alba	Hitt	ahitt	Sales Representative	P@ssword1234!
Caleb	Tee	ctee	HR Manager	P@ssword1234!
Cory	Runion	crunion	HR Specialist	P@ssword1234!
Doyle	Olberding	dolberdi	Finance Manager	P@ssword1234!
Edmond	Dillinger	edilling	Personnel Manager	P@ssword1234!
Eldridge	Mcbath	emcbath	CEO	P@ssword1234!
Eloy	Leonard	eleonard	Shipping Manager	P@ssword1234!
Fran	Stafford	fstaffor	Shipping	P@ssword1234!
Gilbert	Arrington	garringt	Shipping	P@ssword1234!
Hester	Mccullar	hmcculla	Shipping	P@ssword1234!
Irwin	Steinke	isteinke	Sales Manager	P@ssword1234!
Kimber	Krawczyk	kkawczy	Shipping	P@ssword1234!
Lynetta	Chaloux	lchaloux	Shipping	P@ssword1234!
My	Molinar	mmolinar	Shipping	P@ssword1234!
Shea	Blunt	sblunt	Sales Representative	P@ssword1234!
Shelba	Zane	szane	Sales Representative	P@ssword1234!
Temple	Mickley	tmickley	Shipping	P@ssword1234!
Waldo	Leist	wleist	Finance Specialist	P@ssword1234!
Woodrow	Trumbauer	wbrumbau	HR Specialist	P@ssword1234!
Ying	Halliday	yhallida	Sales Representative	P@ssword1234!

Additional Challenges
When you create each user, add comments about the user’s role and set non-manager personnel to have an expiration date two years from the date of creation.
Use the useradd command only once per user created without using passwd.
Steps
Validate that you are in the home folder of your current user by typing pwd and pressing ENTER.

Type sudo useradd ahitt -p P@ssword1234! and press ENTER to create the user ahitt with the default password.

Note

You may be required to enter your password for the first useradd command.

Validate users have been created by typing sudo getent passwd | cut -d: -f1 and pressing ENTER.

Repeat step 2 and 3 for the remaining list of userids from the table on the preceding page.

Note

This command is purely to visualize the created users and not necessary to remember for now.

 [labsuser@centos ~]$ sudo getent passwd | cut -d: -f1
 root
 bin
 daemon
 adm
 lp
 sync
 shutdown
 halt
 mail
 operator
 games
 ftp
 nobody
 systemd-network
 dbus
 sshd
 labsadmin
 labsuser
 ahitt
 ctee
 crunion
 dolberdi
 edilling
 emcbath
 eleonard
 fstaffor
 garringt
 hmcculla
 isteinke
 kkawczy
 lchaloux
 mmolinar 
 sblunt
 szane
 tmickley
 wleist
 wbrumbau
 yhallida

Exercise 2: Create Groups
Mr. X thinks you may have some great potential but wants to see more action. He wants you to create the following groups:

Sales
HR
Finance
Personnel
CEO
Shipping
Managers

When created, add the proper users to the proper groups based on the list provided in the figure for exercise 1.

Note

You may have to use sudo to complete this exercise if you are not root.

TODO
Create all the groups and add the appropriate users to them. Watch out! Managers are personnel, but not all personnel are managers. Some users will belong to multiple groups.
Additional Challenge
Create a group password of FancyAwesomeUnicornSuperLong123!! for the Managers, Finance, and CEO groups.

Steps
Validate that you are in the home folder of your current user by typing pwd and pressing ENTER.

Create the group Sales by typing sudo groupadd Sales into the terminal and pressing ENTER.

Repeat step 2 for the HR, Finance, Personnel, CEO, Shipping, and Managers groups.

Add the user ahitt to the Sales group by typing sudo usermod -a -G Sales ahitt into the terminal and press ENTER.

Repeat step 4 by using the following table to add users to the appropriate groups.

Group Name	Usernames

Sales	
sblunt
szane
yhallida

HR	
ctee
crunion
wtrumbau

Finance	
dolberdi
wleist

Shipping	
eleonard
fstaffor
garringt
hmcculla
kkrawczy
lchaloux
mmolinar
tmickley

Managers	
ctee
dolberdi
edilling
eleonard
isteinke

CEO	
emcbath

Ensure all personnel are added to the Personnel group.

Add YOURUSERNAME to all groups.

Check the group memberships by typing sudo getent group into the terminal and pressing ENTER.

Sales:x:1021:labsuser,ahitt,sblunt,szane,yhallida
HR:x:1022:labsuser,ctee,crunion,wtrumbau
Finance:x:1023:labsuser,dolberdi,wleist
Personnel:x:1024:ahitt,ctee,crunion,dolberdi,edilling,emcbath,eleonard,fstaffor,garringt,hmcculla,isteinke,kkrawczy,lchaloux,mmolinar,szane,tmickley,wleist,wtrumbau,yhallida,sblunt
CEO:x:1025:emcbath,labsuser
Shipping:x:1026:labsuser,eleonard,fstaffor,garringt,hmcculla,kkrawczy,lchaloux,mmolinar,tmickley
Managers:x:1027:labsuser,ctee,dolberdi,edilling,eleonard,isteinke
Exercise 3: Create a Log File
Now that you have some users in your machine, you need to do some basic authentication audit sharing with your partners. In your log file, logins.csv, you will need to add in the date/time and username that logged in.

Helpful Hints

You may have to use sudo to complete this exercise if you are not root.
TODO
Create the log file logins.csv and place it in the SharedFolders directory.
Requirement
HEADER of CSV minimum requirement – contains Date, Time, Username.
Steps
Validate that you are in the /home/YOURUSERNAME/companyA folder by typing pwd and pressing ENTER.

Using the touch command in the terminal, create the file logins.csv in the SharedFolders directory by typing touch SharedFolders/logins.csv and pressing ENTER.

Read and search the /tmp/log/secure file looking for the word LOGIN by typing sudo cat /tmp/log/secure | grep password > SharedFolders/logins.csv into the terminal and pressing ENTER.

Note

Usually, the secure log file is located at /var/log/secure. For the purposes of this lab, we are presenting a sample secure log file at /tmp/log/secure.

Validate your work by typing cat SharedFolders/logins.csv into the terminal and pressing ENTER.

Example Output
Aug 30 13:55:09 centos7 sshd[10119]: Failed password for root from ::ffff:211.155.31.54 port 49700 ssh2          
Aug 30 13:55:10 centos7 sshd[10113]: Failed password for root from ::ffff:211.155.31.54 port 49705 ssh2          
Oct  2 01:41:51 centos7 sshd[13986]: Accepted password for test from ::ffff:203.125.11.170 port 48916 ssh2       
Oct  2 01:41:51 centos7 sshd[13987]: Accepted password for test from ::ffff:203.125.11.170 port 48913 ssh2       
Dec  9 10:14:11 centos7 sshd[16215]: Failed password for root from ::ffff:204.92.87.171 port 47779 ssh2          
Dec  9 10:14:11 centos7 sshd[16219]: Failed password for root from ::ffff:204.92.87.171 port 47793 ssh2          
Dec  9 10:14:11 centos7 sshd[16212]: Failed password for root from ::ffff:204.92.87.171 port 47774 ssh2          
Dec  9 10:14:11 centos7 sshd[16217]: Failed password for root from ::ffff:204.92.87.171 port 47786 ssh2          
Dec  9 11:45:50 centos7 sshd[16349]: Accepted password for root from ::ffff:63.126.79.65 port 32768 ssh2         
Dec  9 11:49:03 centos7 sshd[16398]: Accepted password for root from ::ffff:63.126.79.65 port 32769 ssh2         
Dec  9 11:52:05 centos7 sshd[16414]: Accepted password for root from ::ffff:63.126.79.65 port 32770 ssh2    
STOP

You have successfully completed this lab.